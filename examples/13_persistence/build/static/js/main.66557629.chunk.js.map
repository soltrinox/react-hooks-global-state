{"version":3,"sources":["state.ts","Counter.tsx","Person.tsx","App.tsx","index.ts"],"names":["LOCAL_STORAGE_KEY","initialState","str","state","JSON","parse","count","Error","person","age","firstName","lastName","e","parseState","localStorage","getItem","createStore","action","type","applyMiddleware","getState","next","returnValue","setItem","stringify","dispatch","useGlobalState","increment","decrement","Counter","value","onClick","setFirstName","event","currentTarget","setLastName","setAge","Number","Person","onChange","App","StrictMode","render","React","createElement","document","getElementById"],"mappings":"yNA8BMA,EAAoB,uBAcpBC,EAba,SAACC,GAClB,IACE,IAAMC,EAAQC,KAAKC,MAAMH,GAAO,IAChC,GAA2B,kBAAhBC,EAAMG,MAAoB,MAAM,IAAIC,MAC/C,GAAgC,kBAArBJ,EAAMK,OAAOC,IAAkB,MAAM,IAAIF,MACpD,GAAsC,kBAA3BJ,EAAMK,OAAOE,UAAwB,MAAM,IAAIH,MAC1D,GAAqC,kBAA1BJ,EAAMK,OAAOG,SAAuB,MAAM,IAAIJ,MACzD,OAAOJ,EACP,MAAOS,GACP,OAAO,MAGcC,CAAWC,aAAaC,QAAQf,KAtB7B,CAC1BM,MAAO,EACPE,OAAQ,CACNC,IAAK,EACLC,UAAW,GACXC,SAAU,KA+DP,EAAqCK,aA3C5B,WAA2C,IAA1Cb,EAAyC,uDAAjCF,EAAcgB,EAAmB,uCACxD,OAAQA,EAAOC,MACb,IAAK,YAAa,OAAO,2BACpBf,GADa,IAEhBG,MAAOH,EAAMG,MAAQ,IAEvB,IAAK,YAAa,OAAO,2BACpBH,GADa,IAEhBG,MAAOH,EAAMG,MAAQ,IAEvB,IAAK,eAAgB,OAAO,2BACvBH,GADgB,IAEnBK,OAAO,2BACFL,EAAMK,QADL,IAEJE,UAAWO,EAAOP,cAGtB,IAAK,cAAe,OAAO,2BACtBP,GADe,IAElBK,OAAO,2BACFL,EAAMK,QADL,IAEJG,SAAUM,EAAON,aAGrB,IAAK,SAAU,OAAO,2BACjBR,GADU,IAEbK,OAAO,2BACFL,EAAMK,QADL,IAEJC,IAAKQ,EAAOR,QAGhB,QAAS,OAAON,KAclBF,EACAkB,aAXyB,SAAC,GAAD,IACvBC,EADuB,EACvBA,SADuB,OAEtB,SAACC,GAAD,OAA4B,SAACJ,GAChC,IAAMK,EAAcD,EAAKJ,GAEzB,OADAH,aAAaS,QAAQvB,EAAmBI,KAAKoB,UAAUJ,MAChDE,QAGMG,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,e,OCrFnBC,EAAY,kBAAMF,EAAS,CAAEP,KAAM,eACnCU,EAAY,kBAAMH,EAAS,CAAEP,KAAM,eAa1BW,EAXC,WACd,MAAgBH,EAAe,SAAxBI,EAAP,oBACA,OACE,gCACE,2CAAcA,KACd,wBAAQZ,KAAK,SAASa,QAASJ,EAA/B,gBACA,wBAAQT,KAAK,SAASa,QAASH,EAA/B,oBCTAI,EAAe,SAACC,GAAD,OAA8CR,EAAS,CAC1Ef,UAAWuB,EAAMC,cAAcJ,MAC/BZ,KAAM,kBAGFiB,EAAc,SAACF,GAAD,OAA8CR,EAAS,CACzEd,SAAUsB,EAAMC,cAAcJ,MAC9BZ,KAAM,iBAGFkB,EAAS,SAACH,GAAD,OAA8CR,EAAS,CACpEhB,IAAK4B,OAAOJ,EAAMC,cAAcJ,QAAU,EAC1CZ,KAAM,YAuBOoB,EApBA,WACb,MAAgBZ,EAAe,UAAxBI,EAAP,oBACA,OACE,gCACE,8CAEE,uBAAOA,MAAOA,EAAMpB,UAAW6B,SAAUP,OAE3C,6CAEE,uBAAOF,MAAOA,EAAMnB,SAAU4B,SAAUJ,OAE1C,uCAEE,uBAAOL,MAAOA,EAAMrB,IAAK8B,SAAUH,WCjB5BI,EAXH,kBACV,eAAC,IAAMC,WAAP,WACE,yCACA,cAAC,EAAD,IACA,cAAC,EAAD,IACA,wCACA,cAAC,EAAD,IACA,cAAC,EAAD,QCPJC,iBAAOC,IAAMC,cAAcJ,GAAMK,SAASC,eAAe,U","file":"static/js/main.66557629.chunk.js","sourcesContent":["import { Dispatch } from 'react';\nimport { applyMiddleware } from 'redux';\n\nimport { createStore } from 'react-hooks-global-state';\n\ntype State = {\n  count: number;\n  person: {\n    age: number;\n    firstName: string;\n    lastName: string;\n  };\n};\n\ntype Action =\n  | { type: 'increment' }\n  | { type: 'decrement' }\n  | { type: 'setFirstName'; firstName: string }\n  | { type: 'setLastName'; lastName: string }\n  | { type: 'setAge'; age: number };\n\nconst defaultState: State = {\n  count: 0,\n  person: {\n    age: 0,\n    firstName: '',\n    lastName: '',\n  },\n};\n\nconst LOCAL_STORAGE_KEY = 'my_local_storage_key';\nconst parseState = (str: string | null): State | null => {\n  try {\n    const state = JSON.parse(str || '');\n    if (typeof state.count !== 'number') throw new Error();\n    if (typeof state.person.age !== 'number') throw new Error();\n    if (typeof state.person.firstName !== 'string') throw new Error();\n    if (typeof state.person.lastName !== 'string') throw new Error();\n    return state as State;\n  } catch (e) {\n    return null;\n  }\n};\nconst stateFromStorage = parseState(localStorage.getItem(LOCAL_STORAGE_KEY));\nconst initialState: State = stateFromStorage || defaultState;\n\nconst reducer = (state = initialState, action: Action) => {\n  switch (action.type) {\n    case 'increment': return {\n      ...state,\n      count: state.count + 1,\n    };\n    case 'decrement': return {\n      ...state,\n      count: state.count - 1,\n    };\n    case 'setFirstName': return {\n      ...state,\n      person: {\n        ...state.person,\n        firstName: action.firstName,\n      },\n    };\n    case 'setLastName': return {\n      ...state,\n      person: {\n        ...state.person,\n        lastName: action.lastName,\n      },\n    };\n    case 'setAge': return {\n      ...state,\n      person: {\n        ...state.person,\n        age: action.age,\n      },\n    };\n    default: return state;\n  }\n};\n\nconst saveStateToStorage = (\n  { getState }: { getState: () => State },\n) => (next: Dispatch<Action>) => (action: Action) => {\n  const returnValue = next(action);\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(getState()));\n  return returnValue;\n};\n\nexport const { dispatch, useGlobalState } = createStore(\n  reducer,\n  initialState,\n  applyMiddleware(saveStateToStorage),\n);\n","import React from 'react';\n\nimport { dispatch, useGlobalState } from './state';\n\nconst increment = () => dispatch({ type: 'increment' });\nconst decrement = () => dispatch({ type: 'decrement' });\n\nconst Counter = () => {\n  const [value] = useGlobalState('count');\n  return (\n    <div>\n      <span>Count: {value}</span>\n      <button type=\"button\" onClick={increment}>+1</button>\n      <button type=\"button\" onClick={decrement}>-1</button>\n    </div>\n  );\n};\n\nexport default Counter;\n","import React from 'react';\n\nimport { dispatch, useGlobalState } from './state';\n\nconst setFirstName = (event: React.FormEvent<HTMLInputElement>) => dispatch({\n  firstName: event.currentTarget.value,\n  type: 'setFirstName',\n});\n\nconst setLastName = (event: React.FormEvent<HTMLInputElement>) => dispatch({\n  lastName: event.currentTarget.value,\n  type: 'setLastName',\n});\n\nconst setAge = (event: React.FormEvent<HTMLInputElement>) => dispatch({\n  age: Number(event.currentTarget.value) || 0,\n  type: 'setAge',\n});\n\nconst Person = () => {\n  const [value] = useGlobalState('person');\n  return (\n    <div>\n      <div>\n        First Name:\n        <input value={value.firstName} onChange={setFirstName} />\n      </div>\n      <div>\n        Last Name:\n        <input value={value.lastName} onChange={setLastName} />\n      </div>\n      <div>\n        Age:\n        <input value={value.age} onChange={setAge} />\n      </div>\n    </div>\n  );\n};\n\nexport default Person;\n","import React from 'react';\n\nimport Counter from './Counter';\nimport Person from './Person';\n\nconst App = () => (\n  <React.StrictMode>\n    <h1>Counter</h1>\n    <Counter />\n    <Counter />\n    <h1>Person</h1>\n    <Person />\n    <Person />\n  </React.StrictMode>\n);\n\nexport default App;\n","import React from 'react';\nimport { render } from 'react-dom';\n\nimport App from './App';\n\nrender(React.createElement(App), document.getElementById('app'));\n"],"sourceRoot":""}